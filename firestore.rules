rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if false;

      match /defaultChallenges/{defaultChallengeId}{
        allow read: if true
      }

      match /users/{userId} {
        allow read: if request.auth.uid == userId;
      }

      match /groups/{groupId} {
        allow read: if request.auth.uid in resource.data.members;
        match /completedChallenges/{completedChallengeId} {
            allow read: if true
        }
        match /challenges/{challengeId} {
                allow read: if true
                allow write: if request.auth != null; // Allow authenticated users to write challenges
            }
      }
    }
  }
}